<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>USA 2025 Adventure</title>
  <style>
    /* ========== Base / Reset ========== */
    *{margin:0;padding:0;box-sizing:border-box}
    :root{
      --primary:#007AFF;--secondary:#5856D6;--success:#34C759;--warning:#FF9500;--danger:#FF3B30;
      --ink:#11131a;--muted:#5c6270;--panel:#ffffff;--panel-ghost:rgba(255,255,255,.7);
      --border:rgba(16,24,40,.08);--radius:20px;--shadow:0 10px 30px rgba(16,24,40,.06);
      --glass:rgba(255,255,255,.7);--glass-dark:rgba(17,19,26,.35);
      --curve:cubic-bezier(.4,0,.2,1)
    }
    html,body{height:100%}
    body{
      font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Helvetica Neue",Arial,sans-serif;
      color:var(--ink);
      /* Calmer, modern background */
      background:
        radial-gradient(900px 220px at -10% -10%, rgba(0,0,0,.04), transparent),
        radial-gradient(1100px 260px at 110% -10%, rgba(0,0,0,.04), transparent),
        radial-gradient(1200px 200px at 50% 105%, rgba(0,0,0,.03), transparent),
        #f6f7fb;
    }

    /* ========== Navigation ========== */
    nav{
      position:sticky;top:0;z-index:50;background:rgba(255,255,255,.75);
      backdrop-filter: blur(14px); -webkit-backdrop-filter: blur(14px);
      border-bottom:1px solid var(--border)
    }
    .nav-container{max-width:1200px;margin:0 auto;padding:16px 24px;display:flex;align-items:center;justify-content:space-between;gap:16px}
    .logo{font-weight:800;letter-spacing:.2px;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .nav-links{display:flex;gap:16px;list-style:none}
    .nav-link{padding:8px 12px;border-radius:10px;cursor:pointer;color:var(--ink);font-weight:600;font-size:14px;border:1px solid transparent}
    .nav-link:hover{background:rgba(0,0,0,.04)}
    .nav-link.active{background:var(--primary);color:#fff;border-color:transparent}

    /* ========== Hero ========== */
    .hero{padding:64px 24px 24px;text-align:center}
    .hero-title{font-size:56px;line-height:1.05;letter-spacing:-1.2px;margin-bottom:12px;background:linear-gradient(135deg,#2b2d42,#4a4e69);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .hero-subtitle{font-size:18px;color:var(--muted)}
    .countdown{display:flex;justify-content:center;gap:16px;margin-top:24px;flex-wrap:wrap}
    .countdown-item{background:#fff;border:1px solid var(--border);border-radius:14px;padding:16px 18px;min-width:86px;box-shadow:var(--shadow)}
    .countdown-value{font-size:32px;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .countdown-label{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;margin-top:4px}

    /* ========== Layout Container ========== */
    .container{max-width:1200px;margin:0 auto;padding:0 24px 80px}

    /* ========== Stats ========== */
    .stats-dashboard{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:16px;margin:28px 0}
    .stat-card{background:#fff;border:1px solid var(--border);border-radius:14px;padding:18px;text-align:center;box-shadow:var(--shadow)}
    .stat-icon{font-size:24px;margin-bottom:6px}
    .stat-value{font-size:28px;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .stat-label{font-size:12px;color:var(--muted)}

    /* ========== Budget (mobile-first) ========== */
    .budget-card{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow);margin-bottom:40px}
    .budget-header{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
    .budget-title{font-size:22px;font-weight:800}
    .budget-total{font-size:28px;font-weight:900;background:linear-gradient(135deg,var(--success),#2ecc71);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .budget-items{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-top:16px}
    .budget-item{background:#fafbff;border:1px solid var(--border);border-radius:12px;padding:14px}
    .budget-item-label{font-size:12px;color:var(--muted);margin-bottom:6px}
    .budget-item-value{font-size:18px;font-weight:800}
    .budget-progress{margin-top:18px}
    .progress-bar{width:100%;height:8px;background:#eef1f6;border-radius:999px;overflow:hidden}
    .progress-fill{height:100%;background:linear-gradient(90deg,var(--success),#4ade80);width:0%}
    .progress-label{font-size:12px;color:var(--muted);text-align:center;margin-top:8px}

    /* ========== Live Weather ========== */
    .weather-section{margin:40px 0}
    .section-title{font-size:28px;font-weight:900;margin-bottom:14px}
    .weather-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
    .weather-card{background:#fff;border:1px solid var(--border);border-radius:16px;padding:18px;text-align:center;box-shadow:var(--shadow)}
    .weather-location{font-weight:800;color:var(--primary);margin-bottom:6px}
    .weather-temp{font-size:22px;font-weight:800}
    .weather-icon{font-size:34px;margin:6px 0}
    .weather-desc{font-size:13px;color:var(--muted)}
    .wx-foot{margin-top:8px;font-size:12px;color:var(--muted)}

    /* ========== Birthday Widget ========== */
    .birthday-wrap{display:flex;justify-content:center;margin:38px 0}
    .birthday{width:100%;max-width:880px;background:conic-gradient(from 220deg at 90% -10%, rgba(255,215,0,.2), transparent 40%) #fff;border:1px solid var(--border);border-radius:24px;box-shadow:var(--shadow);overflow:hidden;position:relative}
    .birthday-inner{display:grid;grid-template-columns:1fr 320px;gap:16px;padding:22px}
    .birthday-left{padding-right:8px}
    .b-eyebrow{font-size:12px;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);margin-bottom:6px}
    .b-title{font-size:28px;line-height:1.1;margin-bottom:8px}
    .b-sub{font-size:14px;color:var(--muted)}
    .b-cta{margin-top:14px}
    .b-btn{appearance:none;border:0;background:linear-gradient(135deg,#ff8a00,#ff3b30);color:#fff;font-weight:800;padding:12px 16px;border-radius:14px;cursor:pointer;transition:transform .12s var(--curve), box-shadow .2s var(--curve);box-shadow:0 6px 16px rgba(255,59,48,.25)}
    .b-btn:hover{transform:translateY(-1px)}
    .birthday-right{display:grid;place-items:center;background:
      radial-gradient(120px 80px at 70% 15%, rgba(255,59,48,.08), transparent),
      radial-gradient(180px 120px at 30% 85%, rgba(88,86,214,.08), transparent)}
    .cake{font-size:86px;filter:drop-shadow(0 6px 10px rgba(0,0,0,.1))}
    /* Confetti canvas */
    #confettiCanvas{position:absolute;inset:0;pointer-events:none}

    /* Center/contain better on desktop */
    @media (min-width: 1024px){
      .birthday-inner{grid-template-columns:1.1fr .9fr;padding:26px 28px}
    }
    /* Make it bigger on mobile and stacked */
    @media (max-width: 720px){
      .birthday-inner{grid-template-columns:1fr;gap:10px}
      .cake{font-size:96px}
      .b-title{font-size:26px}
      .birthday{border-radius:20px}
    }

    /* ========== Destinations ========== */
    .locations-heading{font-size:32px;text-align:center;font-weight:900;margin:36px 0 20px}
    .locations-grid{display:grid;gap:18px}
    /* 2×2 on desktop */
    @media (min-width: 1024px){
      .locations-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
    }
    .location-card{background:#fff;border:1px solid var(--border);border-radius:22px;overflow:hidden;box-shadow:var(--shadow);cursor:pointer;transition:transform .2s var(--curve)}
    .location-card:hover{transform:translateY(-3px)}
    .location-image{height:220px;background-size:cover;background-position:center;position:relative}
    .location-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 0%, rgba(0,0,0,.65) 100%);display:flex;align-items:flex-end;padding:16px}
    .location-name{color:#fff;font-weight:900;font-size:24px;text-shadow:0 2px 8px rgba(0,0,0,.4)}
    .location-details{padding:18px}
    .location-dates{font-weight:700;color:var(--primary);margin-bottom:8px}
    .location-hotel{font-size:14px;color:var(--muted)}
    .location-activities{margin-top:10px}
    .activity-chip{display:inline-block;padding:6px 10px;border-radius:999px;background:#eef2ff;color:#3b5bdb;font-size:12px;margin:3px}

    /* Make cards slightly larger on mobile */
    @media (max-width: 600px){
      .location-image{height:260px}
      .location-name{font-size:26px}
    }

    /* ========== Flights (clean, immersive-lite) ========== */
    .flights-heading{font-size:32px;text-align:center;font-weight:900;margin:44px 0 16px}
    .flights{display:grid;gap:16px}
    .boarding{background:#fff;border:1px solid var(--border);border-radius:20px;box-shadow:var(--shadow);overflow:hidden}
    .boarding-head{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px dashed var(--border)}
    .route{font-weight:900;font-size:18px}
    .iata{background:#f0f3ff;border:1px solid rgba(0,0,0,.06);padding:6px 10px;border-radius:10px}
    .arrow{margin:0 6px;opacity:.6}
    .tag{padding:6px 10px;border-radius:999px;background:#eef1f6;font-weight:800;font-size:12px}
    .tag.green{color:#0a7a33;background:rgba(52,199,89,.18)}
    .tag.blue{color:#0b63c9;background:rgba(0,122,255,.18)}
    .boarding-body{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px;padding:14px 18px}
    .bp-field span{display:block;font-size:12px;color:var(--muted)}
    .bp-field strong{font-size:16px}
    .barcode{height:42px;border-top:1px dashed var(--border);background:
      repeating-linear-gradient(90deg, rgba(0,0,0,.8) 0 2px, transparent 2px 4px, rgba(0,0,0,.8) 4px 5px, transparent 5px 7px);opacity:.25}

    @media (max-width: 700px){
      .boarding-body{grid-template-columns:repeat(2,minmax(0,1fr))}
    }

    /* ========== Modal ========== */
    .modal{display:none;position:fixed;inset:0;background:var(--glass-dark);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);z-index:100}
    .modal-content{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:20px;padding:28px;max-width:820px;width:92%;max-height:80vh;overflow:auto;box-shadow:0 30px 60px rgba(0,0,0,.25)}
    .modal-close{position:absolute;top:10px;right:10px;width:40px;height:40px;border-radius:50%;border:0;background:#f3f4f7;cursor:pointer;font-size:18px}

    /* ========== Quick Links, Notes, Checklist (kept from prior) ========== */
    .checklist-section{margin:44px 0;padding:24px;background:#fff;border:1px solid var(--border);border-radius:20px;box-shadow:var(--shadow)}
    .checklist-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px}
    .checklist-card{background:#fafbff;border:1px solid var(--border);padding:18px;border-radius:14px}
    .checklist h3{margin-bottom:12px;color:var(--primary)}
    .checklist{list-style:none}
    .checklist li{display:flex;align-items:center;gap:10px;margin-bottom:10px}
    .checklist input[type=checkbox]{width:18px;height:18px;accent-color:var(--primary)}
    .checklist input[type=checkbox]:checked+label{color:var(--success);text-decoration:line-through;opacity:.75}

    .quick-links{margin:40px 0}
    .links-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
    .link-card{display:block;text-decoration:none;color:inherit;background:#fff;border:1px solid var(--border);border-radius:18px;padding:20px;text-align:center;box-shadow:var(--shadow)}
    .link-icon{font-size:34px;margin-bottom:8px}
    .link-title{font-weight:800}
    .link-desc{font-size:12px;color:var(--muted)}

    .notes-section{margin:40px 0}
    .notes-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .note-card{background:#fff;border:2px solid; border-radius:18px;padding:18px}
    .note-card.warning{border-color:rgba(255,149,0,.35);background:linear-gradient(135deg,rgba(255,149,0,.06),transparent)}
    .note-card.info{border-color:rgba(0,122,255,.35);background:linear-gradient(135deg,rgba(0,122,255,.06),transparent)}
    .note-card.success{border-color:rgba(52,199,89,.35);background:linear-gradient(135deg,rgba(52,199,89,.06),transparent)}
    .note-card.primary{border-color:rgba(88,86,214,.35);background:linear-gradient(135deg,rgba(88,86,214,.06),transparent)}
    .note-icon{font-size:24px;margin-bottom:8px}
  </style>
</head>
<body>
  <nav>
    <div class="nav-container">
      <div class="logo">USA 2025 ✈️</div>
      <ul class="nav-links">
        <li class="nav-link active" data-target="overview" onclick="scrollToSection('overview',event)">Overview</li>
        <li class="nav-link" data-target="live-weather" onclick="scrollToSection('live-weather',event)">Weather</li>
        <li class="nav-link" data-target="destinations" onclick="scrollToSection('destinations',event)">Destinations</li>
        <li class="nav-link" data-target="flights" onclick="scrollToSection('flights',event)">Flights</li>
      </ul>
    </div>
  </nav>

  <header class="hero">
    <h1 class="hero-title">Your American Adventure</h1>
    <p class="hero-subtitle">September 19 – October 3, 2025 • 15 Days</p>
    <div class="countdown">
      <div class="countdown-item"><div class="countdown-value" id="days">--</div><div class="countdown-label">Days</div></div>
      <div class="countdown-item"><div class="countdown-value" id="hours">--</div><div class="countdown-label">Hours</div></div>
      <div class="countdown-item"><div class="countdown-value" id="minutes">--</div><div class="countdown-label">Minutes</div></div>
      <div class="countdown-item"><div class="countdown-value" id="seconds">--</div><div class="countdown-label">Seconds</div></div>
    </div>
  </header>

  <main class="container">
    <!-- Quick Stats -->
    <section class="stats-dashboard" aria-label="Trip stats">
      <div class="stat-card"><div class="stat-icon">🗺️</div><div class="stat-value">4</div><div class="stat-label">Destinations</div></div>
      <div class="stat-card"><div class="stat-icon">🌅</div><div class="stat-value">15</div><div class="stat-label">Days</div></div>
      <div class="stat-card"><div class="stat-icon">🏨</div><div class="stat-value">4</div><div class="stat-label">Stays</div></div>
      <div class="stat-card"><div class="stat-icon">📸</div><div class="stat-value">20+</div><div class="stat-label">Activities</div></div>
    </section>

    <!-- Budget -->
    <section id="overview" class="budget-card" aria-labelledby="budget-title">
      <div class="budget-header">
        <h2 id="budget-title" class="budget-title">Trip Budget</h2>
        <div class="budget-total">—</div> <!-- redacted -->
      </div>
      <div class="budget-items">
        <div class="budget-item"><div class="budget-item-label">✈️ Travel</div><div class="budget-item-value">—</div></div>
        <div class="budget-item"><div class="budget-item-label">🏨 Stays</div><div class="budget-item-value">—</div></div>
        <div class="budget-item"><div class="budget-item-label">🎟️ Activities</div><div class="budget-item-value">—</div></div>
      </div>
      <div class="budget-progress">
        <div class="progress-bar"><div class="progress-fill" id="budgetProgress" style="width:0%"></div></div>
        <p class="progress-label">Add amounts to track progress</p>
      </div>
    </section>

    <!-- Live Weather (Open-Meteo) -->
    <section class="weather-section" id="live-weather" aria-labelledby="wx-title">
      <h2 class="section-title" id="wx-title">Live Weather</h2>
      <div class="weather-grid" id="liveWeatherGrid" aria-live="polite">
        <!-- JS inserts cards -->
      </div>
      <p class="wx-foot" id="wxStatus">Data: Open-Meteo • Refreshes every 2 minutes</p>
    </section>

    <!-- Birthday Widget -->
    <section class="birthday-wrap">
      <div class="birthday" id="birthdayCard" aria-labelledby="bday-title">
        <canvas id="confettiCanvas" width="0" height="0" aria-hidden="true"></canvas>
        <div class="birthday-inner">
          <div class="birthday-left">
            <p class="b-eyebrow">Vegas • Sep 28</p>
            <h3 class="b-title" id="bday-title">🎉 30th Birthday: Let’s Make It Legendary!</h3>
            <p class="b-sub">A toast, a rooftop, and a little chaos. Tap the button when the moment hits—instant celebration.</p>
            <div class="b-cta">
              <button class="b-btn" type="button" onclick="celebrate()">Celebrate! 🎂</button>
            </div>
          </div>
          <div class="birthday-right">
            <div class="cake" aria-hidden="true">🎂</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Destinations -->
    <h2 id="destinations" class="locations-heading">Destinations</h2>
    <section class="locations-grid" aria-label="Destinations grid">
      <article class="location-card" onclick="showLocationDetails('sanfran')">
        <div class="location-image" style="background-image:linear-gradient(to bottom,transparent,rgba(0,0,0,.6)),url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=2070&q=80')">
          <div class="location-overlay"><div class="location-name">San Francisco</div></div>
        </div>
        <div class="location-details">
          <div class="location-dates">📅 Sept 19–23</div>
          <div class="location-hotel">🏨 Hotel (TBC)</div>
          <div class="location-activities">
            <span class="activity-chip">Free Walking Tour</span><span class="activity-chip">Golden Gate</span>
            <span class="activity-chip">Alcatraz</span><span class="activity-chip">Fisherman's Wharf</span>
          </div>
        </div>
      </article>

      <article class="location-card" onclick="showLocationDetails('yosemite')">
        <div class="location-image" style="background-image:linear-gradient(to bottom,transparent,rgba(0,0,0,.6)),url('https://images.unsplash.com/photo-1449824913935-59a10b8d2000?auto=format&fit=crop&w=2070&q=80')">
          <div class="location-overlay"><div class="location-name">Yosemite</div></div>
        </div>
        <div class="location-details">
          <div class="location-dates">📅 Sept 23–26</div>
          <div class="location-hotel">🏨 Stay (TBC)</div>
          <div class="location-activities">
            <span class="activity-chip">Glacier Point</span><span class="activity-chip">Mist Trail</span>
            <span class="activity-chip">Sentinel Dome</span><span class="activity-chip">Stargazing</span>
          </div>
        </div>
      </article>

      <article class="location-card" onclick="showLocationDetails('vegas')">
        <div class="location-image" style="background-image:linear-gradient(to bottom,transparent,rgba(0,0,0,.6)),url('https://images.unsplash.com/photo-1605833556294-ea5c7a74f57d?auto=format&fit=crop&w=2070&q=80')">
          <div class="location-overlay"><div class="location-name">Las Vegas</div></div>
        </div>
        <div class="location-details">
          <div class="location-dates">📅 Sept 26 – Oct 1</div>
          <div class="location-hotel">🏨 Stay (TBC)</div>
          <div class="location-activities">
            <span class="activity-chip">Grand Canyon</span><span class="activity-chip">Hoover Dam</span>
            <span class="activity-chip">MSG Sphere</span><span class="activity-chip">Cirque du Soleil</span>
          </div>
        </div>
      </article>

      <article class="location-card" onclick="showLocationDetails('nyc')">
        <div class="location-image" style="background-image:linear-gradient(to bottom,transparent,rgba(0,0,0,.6)),url('https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?auto=format&fit=crop&w=2070&q=80')">
          <div class="location-overlay"><div class="location-name">New York City</div></div>
        </div>
        <div class="location-details">
          <div class="location-dates">📅 Oct 1–3</div>
          <div class="location-hotel">🏨 Stay (TBC)</div>
          <div class="location-activities">
            <span class="activity-chip">Manhattan</span><span class="activity-chip">Broadway</span><span class="activity-chip">Central Park</span>
          </div>
        </div>
      </article>
    </section>

    <!-- Flights -->
    <h2 id="flights" class="flights-heading">Flight Itinerary</h2>
    <section class="flights" aria-label="Flights">
      <article class="boarding" aria-label="London to San Francisco">
        <div class="boarding-head">
          <div class="route"><span class="iata">LON</span><span class="arrow"> → </span><span class="iata">SFO</span></div>
          <div class="tag green">Booked</div>
        </div>
        <div class="boarding-body">
          <div class="bp-field"><span>Terminal</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Gate</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Boarding</span><strong>—</strong></div>
          <div class="bp-field"><span>Seat</span><strong>—</strong></div>
        </div>
        <div class="barcode" aria-hidden="true"></div>
      </article>

      <article class="boarding" aria-label="Las Vegas to New York">
        <div class="boarding-head">
          <div class="route"><span class="iata">LAS</span><span class="arrow"> → </span><span class="iata">NYC</span></div>
          <div class="tag blue">Check-in Soon</div>
        </div>
        <div class="boarding-body">
          <div class="bp-field"><span>Terminal</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Gate</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Boarding</span><strong>—</strong></div>
          <div class="bp-field"><span>Seat</span><strong>—</strong></div>
        </div>
        <div class="barcode" aria-hidden="true"></div>
      </article>

      <article class="boarding" aria-label="New York to London">
        <div class="boarding-head">
          <div class="route"><span class="iata">NYC</span><span class="arrow"> → </span><span class="iata">LON</span></div>
          <div class="tag green">Booked</div>
        </div>
        <div class="boarding-body">
          <div class="bp-field"><span>Terminal</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Gate</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Boarding</span><strong>—</strong></div>
          <div class="bp-field"><span>Seat</span><strong>—</strong></div>
        </div>
        <div class="barcode" aria-hidden="true"></div>
      </article>
    </section>

    <!-- Quick Links -->
    <section class="quick-links">
      <h2 class="locations-heading" style="margin-top:40px">Quick Links & Resources</h2>
      <div class="links-grid">
        <a href="#" class="link-card" onclick="event.preventDefault(); alert('Add your shared folder link here');"><div class="link-icon">🗂️</div><div class="link-title">Shared Folder</div><div class="link-desc">Itineraries & docs</div></a>
        <a href="#" class="link-card" onclick="event.preventDefault(); alert('Add your maps list link here');"><div class="link-icon">🗺️</div><div class="link-title">Maps List</div><div class="link-desc">Pins & routes</div></a>
        <a href="#" class="link-card" onclick="event.preventDefault(); alert('Add a notes doc link here');"><div class="link-icon">📝</div><div class="link-title">Trip Notes</div><div class="link-desc">Group planning doc</div></a>
        <a href="#" class="link-card" onclick="event.preventDefault(); alert('Add emergency info here');"><div class="link-icon">📞</div><div class="link-title">Emergencies</div><div class="link-desc">Key contacts</div></a>
      </div>
    </section>

    <!-- Important Notes -->
    <section class="notes-section">
      <h2 class="locations-heading" style="margin-top:24px">Important Reminders</h2>
      <div class="notes-grid">
        <div class="note-card warning"><div class="note-icon">⚠️</div><h3>Pre-Travel</h3><ul>
          <li>Check ESTA status</li><li>Confirm stays</li><li>Download offline maps</li><li>Notify bank of travel</li></ul></div>
        <div class="note-card info"><div class="note-icon">ℹ️</div><h3>Air Travel</h3><ul>
          <li>Arrive early for international</li><li>Check baggage allowance</li><li>Download airline apps</li><li>Carry essentials in hand luggage</li></ul></div>
        <div class="note-card success"><div class="note-icon">💰</div><h3>Money Tips</h3><ul>
          <li>Tipping 15–20% typical</li><li>Some cash for tips</li><li>Use contactless where possible</li><li>Enable card travel notices</li></ul></div>
        <div class="note-card primary"><div class="note-icon">📱</div><h3>Stay Connected</h3><ul>
          <li>Check roaming</li><li>Consider eSIM</li><li>Save hotel Wi-Fi details</li><li>Share live locations when out</li></ul></div>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div id="locationModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()" aria-label="Close">×</button>
      <div id="modalContent"></div>
    </div>
  </div>

  <script>
    /* ===== Countdown (no personal flight time) ===== */
    function updateCountdown(){
      const tripDate = new Date('2025-09-19T00:00:00'); // local TZ midnight
      const d = tripDate.getTime() - Date.now();
      if(d>0){
        const days=Math.floor(d/86400000);
        const hours=Math.floor((d%86400000)/3600000);
        const minutes=Math.floor((d%3600000)/60000);
        const seconds=Math.floor((d%60000)/1000);
        const set=(id,val)=>{const el=document.getElementById(id); if(el) el.textContent=String(val).padStart(2,'0');};
        set('days',days); set('hours',hours); set('minutes',minutes); set('seconds',seconds);
      }else{
        const c=document.querySelector('.countdown');
        if(c) c.innerHTML='<h2 style="color:var(--success);font-size:22px;font-weight:900">Trip in Progress! 🎉</h2>';
      }
    }
    setInterval(updateCountdown,1000); updateCountdown();

    /* ===== Persist checklist ===== */
    document.addEventListener('change', (e)=>{
      if(e.target && e.target.matches('.checklist input[type="checkbox"]')){
        localStorage.setItem(e.target.id, e.target.checked);
      }
    });
    document.querySelectorAll('.checklist input[type="checkbox"]').forEach(cb=>{
      const saved = localStorage.getItem(cb.id);
      if(saved==='true') cb.checked = true;
    });

    /* ===== Smooth scroll + active nav ===== */
    function scrollToSection(id, evt){
      const el=document.getElementById(id); if(!el) return;
      const y=el.getBoundingClientRect().top + window.pageYOffset - 80;
      window.scrollTo({top:y,behavior:'smooth'});
      document.querySelectorAll('.nav-link').forEach(l=>l.classList.remove('active'));
      if(evt && evt.currentTarget) evt.currentTarget.classList.add('active');
    }
    window.addEventListener('scroll',()=>{
      const sections=['overview','live-weather','destinations','flights']; const y=window.pageYOffset+100;
      sections.forEach(id=>{
        const s=document.getElementById(id); if(!s) return;
        if(y>=s.offsetTop && y<s.offsetTop+s.offsetHeight){
          document.querySelectorAll('.nav-link').forEach(l=>l.classList.remove('active'));
          const m=document.querySelector(`.nav-link[data-target="${id}"]`); if(m) m.classList.add('active');
        }
      });
    });

    /* ===== Modal content (redacted-safe) ===== */
    const locationDetails={
      sanfran:{title:'San Francisco',dates:'September 19–23, 2025',stay:{name:'Hotel (TBC)'},
        activities:[{day:'Day 1',activity:'Arrival & check-in'},{day:'Day 2',activity:'Walking tour & waterfront'},{day:'Day 3',activity:'Golden Gate viewpoints'},{day:'Day 4',activity:'Neighbourhood exploring'}],
        highlights:['Muir Woods','Alcatraz','Golden Gate','Fisherman’s Wharf']},
      yosemite:{title:'Yosemite National Park',dates:'September 23–26, 2025',stay:{name:'Stay (TBC)'},
        activities:[{day:'Day 1',activity:'Arrive from SF'},{day:'Day 2',activity:'Glacier Point & stargazing'},{day:'Day 3',activity:'Hiking & viewpoints'}],
        highlights:['Glacier Point','Tunnel View','Mist Trail','Sentinel Dome'],tips:'Iconic views are drive-accessible; check road conditions.'},
      vegas:{title:'Las Vegas',dates:'September 26 – October 1, 2025',stay:{name:'Stay (TBC)'},
        activities:[{day:'Day 1',activity:'Strip highlights'},{day:'Day 2',activity:'Hoover Dam visit'},{day:'Day 3',activity:'Shows & entertainment'}],
        highlights:['Grand Canyon tour','Hoover Dam','Cirque du Soleil','MSG Sphere']},
      nyc:{title:'New York City',dates:'October 1–3, 2025',stay:{name:'Stay (TBC)'},
        activities:[{day:'Day 1',activity:'Arrival & evening stroll'},{day:'Day 2',activity:'Manhattan day'},{day:'Day 3',activity:'Parks & bridges'}],
        highlights:['Times Square','Central Park','Broadway','Brooklyn Bridge']}
    };
    function showLocationDetails(key){
      const d=locationDetails[key]; if(!d) return;
      const mc=document.getElementById('modalContent');
      mc.innerHTML = `
        <h2 id="modalTitle" style="font-size:26px;margin-bottom:10px">${d.title}</h2>
        <p style="color:var(--primary);font-weight:700;margin-bottom:16px">${d.dates}</p>
        <div style="background:#f6f8ff;border:1px solid var(--border);padding:14px;border-radius:12px;margin-bottom:14px">
          <h3 style="margin-bottom:6px">🏨 Stay</h3>
          <p><strong>${d.stay.name}</strong></p>
        </div>
        <div style="margin-bottom:14px">
          <h3 style="margin-bottom:8px">📅 Daily Plan</h3>
          ${d.activities.map(i=>`<div style="padding:10px;background:#fafafa;border-radius:8px;margin-bottom:8px"><strong style="color:var(--primary)">${i.day}:</strong> ${i.activity}</div>`).join('')}
        </div>
        <div style="margin-bottom:14px">
          <h3 style="margin-bottom:8px">✨ Highlights</h3>
          <div style="display:flex;flex-wrap:wrap;gap:8px">
            ${d.highlights.map(h=>`<span style="padding:6px 12px;background:#eef2ff;border-radius:999px">${h}</span>`).join('')}
          </div>
        </div>
        ${d.tips?`<div style="background:#f0fff4;border:1px solid rgba(52,199,89,.3);padding:12px;border-radius:12px"><strong>💡 Tip:</strong> ${d.tips}</div>`:''}
      `;
      document.getElementById('locationModal').style.display='block';
    }
    function closeModal(){document.getElementById('locationModal').style.display='none'}
    window.addEventListener('click',(e)=>{const m=document.getElementById('locationModal'); if(e.target===m) closeModal();});

    /* ===== Budget progress simple animation ===== */
    window.addEventListener('load',()=>{ setTimeout(()=>{ const pf=document.getElementById('budgetProgress'); if(pf) pf.style.width='60%'; },400); });

    /* ===== Live Weather (Open-Meteo) every 2 minutes ===== */
    const tripLocations = [
      { id:"sanfran", name:"San Francisco", lat:37.7749, lon:-122.4194 },
      { id:"yosemite", name:"Yosemite", lat:37.7456, lon:-119.5936 },
      { id:"vegas", name:"Las Vegas", lat:36.1699, lon:-115.1398 },
      { id:"nyc", name:"New York", lat:40.7128, lon:-74.0060 }
    ];
    const wmoMap = {
      0:["☀️","Clear sky"],1:["🌤️","Mainly clear"],2:["⛅","Partly cloudy"],3:["☁️","Overcast"],
      45:["🌫️","Fog"],48:["🌫️","Rime fog"],51:["🌦️","Light drizzle"],53:["🌧️","Drizzle"],55:["🌧️","Dense drizzle"],
      61:["🌧️","Slight rain"],63:["🌧️","Moderate rain"],65:["🌧️","Heavy rain"],66:["🌧️","Freezing rain"],67:["🌧️","Freezing rain"],
      71:["🌨️","Slight snow"],73:["🌨️","Moderate snow"],75:["🌨️","Heavy snow"],77:["🌨️","Snow grains"],
      80:["🌦️","Rain showers"],81:["🌧️","Rain showers"],82:["⛈️","Violent showers"],85:["🌨️","Snow showers"],86:["🌨️","Heavy snow"],
      95:["⛈️","Thunderstorm"],96:["⛈️","Thunderstorm (hail)"],99:["⛈️","Thunderstorm (heavy hail)"]
    };
    const codeToIconDesc = code => wmoMap[Number(code)] || ["🌡️","Conditions"];

    function renderWeatherCard(grid, loc, data){
      const [icon, desc] = codeToIconDesc(data.current.weather_code);
      const hi = data.daily.temperature_2m_max?.[0];
      const lo = data.daily.temperature_2m_min?.[0];
      const pr = data.daily.precipitation_sum?.[0];
      const card = document.createElement('div');
      card.className='weather-card'; card.id=`wx-${loc.id}`;
      card.innerHTML = `
        <div class="weather-location">${loc.name}</div>
        <div class="weather-temp">${Math.round(data.current.temperature_2m)}°C</div>
        <div class="weather-icon" aria-hidden="true">${icon}</div>
        <div class="weather-desc">${desc}</div>
        <div class="wx-foot">${Number.isFinite(hi)?`H: ${Math.round(hi)}° • `:''}${Number.isFinite(lo)?`L: ${Math.round(lo)}° • `:''}${typeof pr==='number'?`💧 ${pr.toFixed(1)}mm`:''}</div>
      `;
      grid.appendChild(card);
    }

    async function fetchLocationWeather(loc){
      const url = new URL('https://api.open-meteo.com/v1/forecast');
      url.searchParams.set('latitude', String(loc.lat));
      url.searchParams.set('longitude', String(loc.lon));
      url.searchParams.set('current', 'temperature_2m,weather_code');
      url.searchParams.set('daily', 'temperature_2m_max,temperature_2m_min,precipitation_sum');
      url.searchParams.set('timezone', 'auto');
      const res = await fetch(url.toString(), { cache:'no-store' });
      if(!res.ok) throw new Error('Weather fetch failed');
      const j = await res.json();
      return {
        current:{
          temperature_2m: j.current?.temperature_2m ?? j.current_weather?.temperature ?? 0,
          weather_code: j.current?.weather_code ?? j.current_weather?.weathercode ?? 0
        },
        daily: j.daily || {}
      };
    }

    async function loadLiveWeather(){
      const grid = document.getElementById('liveWeatherGrid'); if(!grid) return;
      grid.innerHTML = tripLocations.map(l=>`
        <div class="weather-card" id="wx-${l.id}">
          <div class="weather-location">${l.name}</div>
          <div class="weather-temp">—</div>
          <div class="weather-icon">—</div>
          <div class="weather-desc">Fetching…</div>
          <div class="wx-foot"></div>
        </div>`).join('');
      let ok=0;
      for(const loc of tripLocations){
        try{
          const data = await fetchLocationWeather(loc);
          const old = document.getElementById(`wx-${loc.id}`); if(old) old.remove();
          renderWeatherCard(grid, loc, data); ok++;
        }catch(e){
          const card = document.getElementById(`wx-${loc.id}`);
          if(card){ card.querySelector('.weather-icon').textContent='⚠️'; card.querySelector('.weather-desc').textContent='Couldn’t load'; }
          console.error(e);
        }
      }
      const when = new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
      const st = document.getElementById('wxStatus');
      if(st) st.textContent = `Data: Open-Meteo • Last updated ${when} • Refreshes every 2 minutes`;
    }
    document.addEventListener('DOMContentLoaded', ()=>{
      loadLiveWeather();
      setInterval(loadLiveWeather, 120000); // 2 minutes
    });

    /* ===== Birthday: centered card + lightweight confetti ===== */
    let confettiTimer = null;
    function celebrate(){
      burstConfetti(220);
      // optional pulse
      const card = document.getElementById('birthdayCard');
      if(card){
        card.animate([{transform:'scale(1)'},{transform:'scale(1.02)'},{transform:'scale(1)'}],{duration:420,easing:'cubic-bezier(.2,.7,.2,1)'});
      }
    }
    function burstConfetti(n=160){
      const canvas = document.getElementById('confettiCanvas');
      const card = document.getElementById('birthdayCard');
      if(!canvas || !card) return;
      const rect = card.getBoundingClientRect();
      canvas.width = rect.width;
      canvas.height = rect.height;
      const ctx = canvas.getContext('2d');
      const pieces = Array.from({length:n}).map(()=>({
        x: Math.random()*canvas.width,
        y: -10,
        r: 2 + Math.random()*4,
        c: randomColor(),
        a: 0.8 + Math.random()*0.2,
        vx: -2 + Math.random()*4,
        vy: 2 + Math.random()*3,
        rot: Math.random()*Math.PI,
        vr: -0.1 + Math.random()*0.2
      }));
      cancelAnimationFrame(confettiTimer);
      let last = performance.now();
      (function tick(now){
        const dt = Math.min(32, now - last); last = now;
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for(const p of pieces){
          p.vy += 0.01*dt; // gravity
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;
          ctx.save();
          ctx.globalAlpha = p.a;
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = p.c;
          ctx.fillRect(-p.r, -p.r, p.r*2, p.r*2);
          ctx.restore();
        }
        // keep animating while pieces on screen
        if(pieces.some(p=>p.y < canvas.height+20)) confettiTimer = requestAnimationFrame(tick);
        else ctx.clearRect(0,0,canvas.width,canvas.height);
      })(last);
      // Respect reduced motion
      if(window.matchMedia('(prefers-reduced-motion: reduce)').matches){
        const ctx2 = canvas.getContext('2d');
        ctx2.clearRect(0,0,canvas.width,canvas.height);
      }
    }
    function randomColor(){
      const palette = ['#FF3B30','#FF9500','#FFCC00','#34C759','#007AFF','#5856D6','#FF2D55'];
      return palette[Math.floor(Math.random()*palette.length)];
    }

    /* ===== Accessibility tweak: keyboard close modal ===== */
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeModal(); });
  </script>
</body>
</html>
